{"version":3,"file":"mongoModule.js","sourceRoot":"","sources":["mongoModule.ts"],"names":[],"mappings":"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","sourcesContent":["import { MongoContextFactory } from \"./schema\";\r\nimport { RatedEntitieBase } from \"./entities/RatedEntitieBase\";\r\nimport { CommentableEntitieBase } from \"./entities/CommentableEntitieBase\";\r\nimport { Model } from \"mongoose\";\r\nimport { JobEntitie } from \"./entities/JobEntitie\";\r\n\r\nclass DbCreator\r\n{\r\n\tstatic async IsDbInitialized(factory: MongoContextFactory): Promise<boolean>\r\n\t{\r\n\t\treturn await new Promise((resolve) =>\r\n\t\t{\r\n\t\t\tfactory.AgeModel.countDocuments(\"*\", function(err, count)\r\n\t\t\t{\r\n\t\t\t\tif(err)\r\n\t\t\t\t{\r\n\t\t\t\t\tconsole.error(err);\r\n\t\t\t\t\tresolve(false);\r\n\t\t\t\t}\r\n\t\t\t\tif(count)\r\n\t\t\t\t{\r\n\t\t\t\t\tresolve(true);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tresolve(false);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tstatic async InitializeDb(factory: MongoContextFactory,\r\n\t\t\t\t\t\t\t  percent: Node,\r\n\t\t\t\t\t\t\t  status: Node): Promise<void>\r\n\t{\r\n\t\tlet dbDataImplementor = new DbDataImpl();\r\n\t\ttry\r\n\t\t{\r\n\t\t\tconsole.log(\"creating age data\");\r\n\t\t\tpercent.textContent = \"12%\";\r\n\t\t\tstatus.textContent  = \"Заполнение коллекции возрастов...\";\r\n\t\t\tawait dbDataImplementor.ImplAgeData(factory.AgeModel);\r\n\r\n\t\t\tconsole.log(\"creating experience data\");\r\n\t\t\tpercent.textContent = \"16%\";\r\n\t\t\tstatus.textContent  = \"Заполнение коллекции опыта работы...\";\r\n\t\t\tawait dbDataImplementor.ImplExpData(factory.ExpModel);\r\n\r\n\t\t\tconsole.log(\"creating family type data\");\r\n\t\t\tpercent.textContent = \"20%\";\r\n\t\t\tstatus.textContent  = \"Заполнение коллекции типа семьи...\";\r\n\t\t\tawait dbDataImplementor.ImplFamData(factory.FamModel);\r\n\r\n\t\t\tconsole.log(\"creating studied data\");\r\n\t\t\tpercent.textContent = \"22%\";\r\n\t\t\tstatus.textContent  = \"Заполнение коллекции типа образования...\";\r\n\t\t\tawait dbDataImplementor.ImplStudData(factory.StudModel);\r\n\r\n\t\t\tconsole.log(\"creating payment data\");\r\n\t\t\tpercent.textContent = \"27%\";\r\n\t\t\tstatus.textContent  = \"Заполнение коллекции оплаты труда...\";\r\n\t\t\tawait dbDataImplementor.ImplPaymentData(factory.PaymentModel);\r\n\r\n\t\t\tconsole.log(\"creating jobs\");\r\n\t\t\tpercent.textContent = \"29%\";\r\n\t\t\tstatus.textContent  = \"Заполнение коллекции вакансий...\";\r\n\t\t\tawait dbDataImplementor.ImplJobsData(factory.JobModel);\r\n\t\t}\r\n\t\tcatch(exc)\r\n\t\t{\r\n\t\t\tstatus.textContent += \" Ошибка\";\r\n\t\t\tthrow exc;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nclass DbDataImpl\r\n{\r\n\t_ages: RatedEntitieBase[];\r\n\t_fams: RatedEntitieBase[];\r\n\t_exps: RatedEntitieBase[];\r\n\t_pays: RatedEntitieBase[];\r\n\t_studs: RatedEntitieBase[];\r\n\r\n\t_jobs: JobEntitie[];\r\n\r\n\tconstructor()\r\n\t{\r\n\t\tthis._ages  = [];\r\n\t\tthis._fams  = [];\r\n\t\tthis._exps  = [];\r\n\t\tthis._pays  = [];\r\n\t\tthis._studs = [];\r\n\r\n\t\tthis._jobs = [];\r\n\t}\r\n\r\n\tpublic async ImplAgeData(ageModel: Model<any>)\r\n\t{\r\n\t\tlet entry   = new ageModel(new RatedEntitieBase(\"< 18\", 5));\r\n\t\tlet dbEntry = await this.Save(entry, RatedEntitieBase.Represent);\r\n\t\tthis._ages.push(dbEntry as RatedEntitieBase);\r\n\r\n\t\tentry   = new ageModel(new RatedEntitieBase(\"18-20\", 10));\r\n\t\tdbEntry = await this.Save(entry, RatedEntitieBase.Represent);\r\n\t\tthis._ages.push(dbEntry as RatedEntitieBase);\r\n\r\n\t\tentry   = new ageModel(new RatedEntitieBase(\"21-40\", 30));\r\n\t\tdbEntry = await this.Save(entry, RatedEntitieBase.Represent);\r\n\t\tthis._ages.push(dbEntry as RatedEntitieBase);\r\n\r\n\t\tentry   = new ageModel(new RatedEntitieBase(\"41-50\", 20));\r\n\t\tdbEntry = await this.Save(entry, RatedEntitieBase.Represent);\r\n\t\tthis._ages.push(dbEntry as RatedEntitieBase);\r\n\r\n\t\tentry   = new ageModel(new RatedEntitieBase(\"> 51\", 5));\r\n\t\tdbEntry = await this.Save(entry, RatedEntitieBase.Represent);\r\n\t\tthis._ages.push(dbEntry as RatedEntitieBase);\r\n\t}\r\n\r\n\tpublic async ImplFamData(famModel: Model<any>)\r\n\t{\r\n\t\tlet entry   = new famModel(new RatedEntitieBase(\"Холост/не замужем\", 30));\r\n\t\tlet dbEntry = await this.Save(entry, RatedEntitieBase.Represent);\r\n\t\tthis._fams.push(dbEntry as RatedEntitieBase);\r\n\r\n\t\tentry   = new famModel(new RatedEntitieBase(\"Женат/замужем\", 30));\r\n\t\tdbEntry = await this.Save(entry, RatedEntitieBase.Represent);\r\n\t\tthis._fams.push(dbEntry as RatedEntitieBase);\r\n\r\n\t\tentry   = new famModel(new RatedEntitieBase(\"Есть ребёнок\", 20));\r\n\t\tdbEntry = await this.Save(entry, RatedEntitieBase.Represent);\r\n\t\tthis._fams.push(dbEntry as RatedEntitieBase);\r\n\r\n\t\tentry   = new famModel(new RatedEntitieBase(\"Есть дети\", 10));\r\n\t\tdbEntry = await this.Save(entry, RatedEntitieBase.Represent);\r\n\t\tthis._fams.push(dbEntry as RatedEntitieBase);\r\n\t}\r\n\r\n\tpublic async ImplExpData(famModel: Model<any>)\r\n\t{\r\n\t\tlet entry   = new famModel(new RatedEntitieBase(\"Нет\", 0));\r\n\t\tlet dbEntry = await this.Save(entry, RatedEntitieBase.Represent);\r\n\t\tthis._exps.push(dbEntry as RatedEntitieBase);\r\n\r\n\t\tentry   = new famModel(new RatedEntitieBase(\"< 1 года\", 5));\r\n\t\tdbEntry = await this.Save(entry, RatedEntitieBase.Represent);\r\n\t\tthis._exps.push(dbEntry as RatedEntitieBase);\r\n\r\n\t\tentry   = new famModel(new RatedEntitieBase(\"1 год\", 10));\r\n\t\tdbEntry = await this.Save(entry, RatedEntitieBase.Represent);\r\n\t\tthis._exps.push(dbEntry as RatedEntitieBase);\r\n\r\n\t\tentry   = new famModel(new RatedEntitieBase(\"2 года\", 15));\r\n\t\tdbEntry = await this.Save(entry, RatedEntitieBase.Represent);\r\n\t\tthis._exps.push(dbEntry as RatedEntitieBase);\r\n\r\n\t\tentry   = new famModel(new RatedEntitieBase(\"более 2 лет\", 20));\r\n\t\tdbEntry = await this.Save(entry, RatedEntitieBase.Represent);\r\n\t\tthis._exps.push(dbEntry as RatedEntitieBase);\r\n\t}\r\n\r\n\tpublic async ImplStudData(famModel: Model<any>)\r\n\t{\r\n\t\tlet entry   = new famModel(new RatedEntitieBase(\"Нет\", 0));\r\n\t\tlet dbEntry = await this.Save(entry, RatedEntitieBase.Represent);\r\n\t\tthis._studs.push(dbEntry as RatedEntitieBase);\r\n\r\n\t\tentry   = new famModel(new RatedEntitieBase(\"Не оконченное среднее\", 0));\r\n\t\tdbEntry = await this.Save(entry, RatedEntitieBase.Represent);\r\n\t\tthis._studs.push(dbEntry as RatedEntitieBase);\r\n\r\n\t\tentry   = new famModel(new RatedEntitieBase(\"Среднее\", 1));\r\n\t\tdbEntry = await this.Save(entry, RatedEntitieBase.Represent);\r\n\t\tthis._studs.push(dbEntry as RatedEntitieBase);\r\n\r\n\t\tentry   = new famModel(new RatedEntitieBase(\"Среднее специальное\", 3));\r\n\t\tdbEntry = await this.Save(entry, RatedEntitieBase.Represent);\r\n\t\tthis._studs.push(dbEntry as RatedEntitieBase);\r\n\r\n\t\tentry   = new famModel(new RatedEntitieBase(\"IT-курсы\", 5));\r\n\t\tdbEntry = await this.Save(entry, RatedEntitieBase.Represent);\r\n\t\tthis._studs.push(dbEntry as RatedEntitieBase);\r\n\r\n\t\tentry   = new famModel(new RatedEntitieBase(\"Среднее специальное IT-направление\", 10));\r\n\t\tdbEntry = await this.Save(entry, RatedEntitieBase.Represent);\r\n\t\tthis._studs.push(dbEntry as RatedEntitieBase);\r\n\r\n\t\tentry   = new famModel(new RatedEntitieBase(\"Не полное высшее\", 10));\r\n\t\tdbEntry = await this.Save(entry, RatedEntitieBase.Represent);\r\n\t\tthis._studs.push(dbEntry as RatedEntitieBase);\r\n\r\n\t\tentry   = new famModel(new RatedEntitieBase(\"Не полное высшее IT-направление\", 15));\r\n\t\tdbEntry = await this.Save(entry, RatedEntitieBase.Represent);\r\n\t\tthis._studs.push(dbEntry as RatedEntitieBase);\r\n\r\n\t\tentry   = new famModel(new RatedEntitieBase(\"Высшее\", 15));\r\n\t\tdbEntry = await this.Save(entry, RatedEntitieBase.Represent);\r\n\t\tthis._studs.push(dbEntry as RatedEntitieBase);\r\n\r\n\t\tentry   = new famModel(new RatedEntitieBase(\"Высшее IT-направление\", 20));\r\n\t\tdbEntry = await this.Save(entry, RatedEntitieBase.Represent);\r\n\t\tthis._studs.push(dbEntry as RatedEntitieBase);\r\n\r\n\t\tentry   = new famModel(new RatedEntitieBase(\"Кандидат наук\", 22));\r\n\t\tdbEntry = await this.Save(entry, RatedEntitieBase.Represent);\r\n\t\tthis._studs.push(dbEntry as RatedEntitieBase);\r\n\r\n\t\tentry   = new famModel(new RatedEntitieBase(\"Кандидат технических наук\", 30));\r\n\t\tdbEntry = await this.Save(entry, RatedEntitieBase.Represent);\r\n\t\tthis._studs.push(dbEntry as RatedEntitieBase);\r\n\t}\r\n\r\n\tpublic async ImplPaymentData(paymentModel: Model<any>)\r\n\t{\r\n\t\tlet entry   = new paymentModel(new RatedEntitieBase(\"10000\", 10));\r\n\t\tlet dbEntry = await this.Save(entry, RatedEntitieBase.Represent);\r\n\t\tthis._pays.push(dbEntry as RatedEntitieBase);\r\n\r\n\t\tentry   = new paymentModel(new RatedEntitieBase(\"15000\", 12));\r\n\t\tdbEntry = await this.Save(entry, RatedEntitieBase.Represent);\r\n\t\tthis._pays.push(dbEntry as RatedEntitieBase);\r\n\r\n\t\tentry   = new paymentModel(new RatedEntitieBase(\"30000\", 25));\r\n\t\tdbEntry = await this.Save(entry, RatedEntitieBase.Represent);\r\n\t\tthis._pays.push(dbEntry as RatedEntitieBase);\r\n\r\n\t\tentry   = new paymentModel(new RatedEntitieBase(\"50000\", 40));\r\n\t\tdbEntry = await this.Save(entry, RatedEntitieBase.Represent);\r\n\t\tthis._pays.push(dbEntry as RatedEntitieBase);\r\n\r\n\t\tentry   = new paymentModel(new RatedEntitieBase(\"60000\", 50));\r\n\t\tdbEntry = await this.Save(entry, RatedEntitieBase.Represent);\r\n\t\tthis._pays.push(dbEntry as RatedEntitieBase);\r\n\t}\r\n\r\n\tpublic async ImplJobsData(jobModel: Model<any>)\r\n\t{\r\n\t\tlet job     = new JobEntitie(\"Охранник\",\r\n\t\t\tthis._ages[0],\r\n\t\t\tthis._studs[0],\r\n\t\t\tthis._exps[0],\r\n\t\t\tthis._fams[0],\r\n\t\t\tthis._pays[0],\r\n\t\t\t\"Охрана помещений\",\r\n\t\t\t\"Рабочая неделя\",\r\n\t\t\t0);\r\n\t\tlet entry   = new jobModel(job.ToDbEntry());\r\n\t\tlet dbEntry = await this.Save(entry, RatedEntitieBase.Represent);\r\n\t\tthis._jobs.push(dbEntry as JobEntitie);\r\n\t}\r\n\r\n\tprivate async Save<T>(dbEntry: any, represent: Function): Promise<T>\r\n\t{\r\n\t\treturn new Promise((resolve, reject) =>\r\n\t\t{\r\n\t\t\tdbEntry.save(function(err, dbEntry)\r\n\t\t\t{\r\n\t\t\t\tif(err)\r\n\t\t\t\t{\r\n\t\t\t\t\tconsole.error(err);\r\n\t\t\t\t\treject();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tresolve(represent(dbEntry));\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport { DbCreator };"]}