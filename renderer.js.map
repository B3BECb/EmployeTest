{"version":3,"file":"renderer.js","sourceRoot":"","sources":["renderer.ts"],"names":[],"mappings":";;AAAA,qCAA+C;AAC/C,2CAAwC;AAExC,+CAAwC;AAExC,IAAU,KAAK,CAkCd;AAlCD,WAAU,KAAK;IAAC,IAAA,KAAK,CAkCpB;IAlCe,WAAA,KAAK;QAEpB,OAAO,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;QAEzB,IAAI,KAAK,GAAG,KAAK,IAAI,EAAE;YAEtB,IAAI,OAAO,GAAG,QAAQ,CAAC,aAAa,CAAC,qBAAqB,CAAC,CAAC;YAC5D,IAAI,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,oBAAoB,CAAC,CAAC;YAE1D,OAAO,CAAC,WAAW,GAAG,IAAI,CAAC;YAC3B,MAAM,CAAC,WAAW,GAAG,qBAAqB,CAAC;YAE3C,IAAI,OAAO,GAAG,IAAI,4BAAmB,CAAC,qBAAS,CAAC,MAAM,EAAE,qBAAS,CAAC,SAAS,CAAC,CAAC;YAC7E,IAAG,CAAC,MAAM,OAAO,CAAC,eAAe,EAAE,EACnC;gBACC,KAAK,CAAC,0CAA0C,qBAAS,CAAC,MAAM,aAAa,qBAAS,CAAC,SAAS,EAAE,CAAC,CAAA;gBACnG,MAAM,CAAC,WAAW,GAAG,4BAA4B,CAAC;aAClD;YAED,OAAO,CAAC,WAAW,GAAG,KAAK,CAAC;YAC5B,MAAM,CAAC,WAAW,GAAG,0BAA0B,CAAC;YAEhD,IAAG,CAAC,MAAM,uBAAS,CAAC,eAAe,CAAC,OAAO,CAAC,EAC5C;gBACC,OAAO,CAAC,WAAW,GAAG,KAAK,CAAC;gBAC5B,MAAM,CAAC,WAAW,GAAG,4BAA4B,CAAC;gBAClD,MAAM,uBAAS,CAAC,YAAY,CAAC,OAAO,EAAE,OAAO,EAAE,MAAM,CAAC,CAAC;aACvD;YAED,OAAO,CAAC,WAAW,GAAG,MAAM,CAAC;YAC7B,MAAM,CAAC,WAAW,GAAG,QAAQ,CAAC;QAC/B,CAAC,CAAC;QAEF,KAAK,EAAE,CAAC;IACT,CAAC,EAlCe,KAAK,GAAL,WAAK,KAAL,WAAK,QAkCpB;AAAD,CAAC,EAlCS,KAAK,KAAL,KAAK,QAkCd","sourcesContent":["import { MongoContextFactory } from \"./schema\";\nimport { AppConsts } from \"./appConsts\";\n\nimport {DbCreator} from \"./mongoModule\";\n\nnamespace Pages.Index\n{\n\tconsole.log('mongo use');\n\n\tlet start = async () =>\n\t{\n\t\tlet percent = document.querySelector('[data-id=\"percent\"]');\n\t\tlet status = document.querySelector('[data-id=\"status\"]');\n\n\t\tpercent.textContent = \"0%\";\n\t\tstatus.textContent = \"Подключение к БД...\";\n\n\t\tlet factory = new MongoContextFactory(AppConsts.dbName, AppConsts.mongoPort);\n\t\tif(!await factory.TryConnectAsync())\n\t\t{\n\t\t\talert(`Не удалось подключиться к локальной БД ${AppConsts.dbName} по порту ${AppConsts.mongoPort}`)\n\t\t\tstatus.textContent = \"Ошибка подключения к БД...\";\n\t\t}\n\n\t\tpercent.textContent = \"10%\";\n\t\tstatus.textContent = \"Верификация данных БД...\";\n\n\t\tif(!await DbCreator.IsDbInitialized(factory))\n\t\t{\n\t\t\tpercent.textContent = \"11%\";\n\t\t\tstatus.textContent = \"Инициализация данных БД...\";\n\t\t\tawait DbCreator.InitializeDb(factory, percent, status);\n\t\t}\n\n\t\tpercent.textContent = \"100%\";\n\t\tstatus.textContent = \"Готово\";\n\t};\n\n\tstart();\n}"]}